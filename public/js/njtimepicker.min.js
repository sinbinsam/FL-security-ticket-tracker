!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NJTimePicker",t):(e=e||self).NJTimePicker=t()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?a(e):t}function u(e,t,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(i):s.value}})(e,t,i||e)}var l=function e(){t(this,e);var i=document.createElement("div");return i.className="nj-overlay",i};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var h=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e,i){e.exports=function(){function e(){t(this,e),this.events={},this.listeners={}}return n(e,[{key:"on",value:function(e,t,i){if("function"!=typeof t)throw"invalid listener.";var n=i||Math.random().toString(36).substring(7);return(this.events[e]=this.events[e]||[]).push(n),this.listeners[n]={cb:t,ev:e},n}},{key:"once",value:function(e,t,i){var n=this.on(e,t,i);this.listeners[n].once=!0}},{key:"off",value:function(e){var t=this;if(this.events[e])this.events[e].forEach(function(e){delete t.listeners[e]}),delete this.events[e];else if(this.listeners[e]){var i=this.listeners[e];this.events[i.ev].splice(e,1),delete this.listeners[e]}}},{key:"emit",value:function(e){var t=this,i=[].slice.call(arguments,1);(this.events[e]||[]).forEach(function(n){var s=t.listeners[n];s.cb(1==i.length?i[0]:i),s.once&&t.off(e)})}}]),e}()}),f=function(){function e(i,n){t(this,e),this.config=i,this.emitter=n,this.resetValue()}return n(e,[{key:"build",value:function(e){var t=e.type,i=e.headerText;this.element=document.createElement("div"),this.element.className="nj-".concat(t,"-container"),this.createHeader({className:"nj-section-header",innerText:i||t,element:this.element})}},{key:"createHeader",value:function(e){var t=e.className,i=e.innerText,n=e.element,s=document.createElement("div");s.className=t,s.innerText=i,n.append(s)}},{key:"createItem",value:function(e){var t=e.container,i=e.innerText,n=e.disabled,s=document.createElement("div");s.className="nj-item",s.innerText=i,s.setAttribute("data",i.toString().toLowerCase()),n&&s.setAttribute("disabled","disabled"),s.onclick=this.itemClick.bind(this,s),t.append(s)}},{key:"itemClick",value:function(e){e.hasAttribute("disabled")||(this.currentSelection&&this.currentSelection.classList.remove("selected"),e.classList.add("selected"),this.currentSelection=e,this.currentValue=e.getAttribute("data"),this.emitter.emit("selection"))}},{key:"setValue",value:function(e){var t=this.element.querySelector('div[data="'.concat(e,'"]'));t&&this.itemClick(t)}},{key:"getValue",value:function(){return this.currentValue}},{key:"resetValue",value:function(){this.currentSelection&&this.currentSelection.classList.remove("selected"),this.currentSelection=this.currentValue=null}}]),e}(),m=function(e){function i(e,n){var s;return t(this,i),s=c(this,r(i).call(this,e,n)),u(r(i.prototype),"build",a(s)).call(a(s),{type:"hours",headerText:s.config.texts.hours}),s.createButtons(),s}return s(i,f),n(i,[{key:"createButtons",value:function(){var e=document.createElement("div");e.className="nj-hours-wrapper";for(var t="12"==this.config.format?12:23,n="12"==this.config.format?1:0,s=Array.isArray(this.config.disabledHours)?this.config.disabledHours:[],o=n;o<=t;o++)u(r(i.prototype),"createItem",this).call(this,{container:e,innerText:o,disabled:s.includes(o)});this.element.append(e)}}]),i}(),d=function(e){function i(e,n){var s;return t(this,i),s=c(this,r(i).call(this,e,n)),u(r(i.prototype),"build",a(s)).call(a(s),{type:"minutes",headerText:s.config.texts.minutes}),s.createButtons(),s}return s(i,f),n(i,[{key:"createButtons",value:function(){var e=this,t=document.createElement("div");t.className="nj-minutes-wrapper";var n=this.config.minutes||[0,15,30,45],s=Array.isArray(this.config.disabledMinutes)?this.config.disabledMinutes:[];n.forEach(function(n){"number"==typeof n&&n<60&&u(r(i.prototype),"createItem",e).call(e,{container:t,innerText:n,disabled:s.includes(n)})}),this.element.append(t)}}]),i}(),p=function(e){function i(e,n){var s;return t(this,i),(s=c(this,r(i).call(this,e,n))).config=e,s.currentSelection=null,s.currentValue=null,u(r(i.prototype),"build",a(s)).call(a(s),{type:"ampm",headerText:s.config.texts.ampm||"AM/PM"}),s.createButtons(),s}return s(i,f),n(i,[{key:"createButtons",value:function(){var e=document.createElement("div");e.className="nj-ampm-wrapper",u(r(i.prototype),"createItem",this).call(this,{container:e,innerText:"AM"}),u(r(i.prototype),"createItem",this).call(this,{container:e,innerText:"PM"}),this.element.append(e)}}]),i}(),v=function(){function e(i){t(this,e),this.config=i,this.build()}return n(e,[{key:"build",value:function(){this.element=document.createElement("div"),this.element.className="nj-header-container",this.config.headerText&&console.warn("headerText is deprecated and will be removed soon. Please use texts.header instead."),this.element.textContent=this.config.headerText||this.config.texts.header}}]),e}(),y=function(){function e(i,n){t(this,e),this.config=i,this.emitter=n}return n(e,[{key:"build",value:function(){return this.element=document.createElement("div"),this.element.className="nj-action-container",this.createButton({type:"save",text:this.config.texts.save||"Save"}),this.createButton({type:"clear",text:this.config.texts.clear||"Clear"}),this.createButton({type:"close",text:this.config.texts.close||"Close"}),this.element}},{key:"createButton",value:function(e){var t=this,i=e.type,n=e.text,s=document.createElement("div");s.className="nj-action-button nj-action-".concat(i),s.innerText=n,s.onclick=function(){t.emitter.emit("btn-"+n.toLocaleLowerCase())},this.element.append(s)}}]),e}();return function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,i),this.checkTarget(e.targetEl||e.targetID),this.config=this.extend({options:e}),this.emitter=new h,this.pickerVisible=!1,this.allowAutoSave=!1,this.build()}return n(i,[{key:"extend",value:function(t){var i=t.target,n=void 0===i?{}:i,s=t.options,r=t.defaults,o=void 0===r?this.defaultConfig:r;return Object.keys(o).forEach(function(t){"object"==e(o[t])&&"texts"==t?(n[t]={},Object.keys(o[t]).forEach(function(e){n[t][e]=s[t]&&s[t][e]?s[t][e]:o[t][e]})):n[t]=s[t]||o[t]}),n}},{key:"checkTarget",value:function(e){if(e instanceof HTMLElement)this.targetElement=e;else{if(!document.querySelector("#".concat(e)))throw"NJPicker requires a valid target element(targetEl) or target element ID(targetID)";this.targetElement=document.querySelector("#".concat(e))}}},{key:"build",value:function(){var e=this;this.targetElement.addEventListener("click",this.show.bind(this)),this.wrapper=document.createElement("div"),this.wrapper.classList.add("nj-picker"),this.wrapper.setAttribute("id",this.config.id),this.overlay=new l,this.config.clickOutsideToClose&&this.overlay.addEventListener("click",this.hide.bind(this)),this.wrapper.append(this.overlay),this.container=document.createElement("div"),this.container.classList.add("nj-picker-container"),(this.config.headerText||this.config.texts.header)&&(this.header=new v(this.config),this.container.append(this.header.element)),this.buildItems(),this.buildButtons(),this.wrapper.append(this.container),document.body.append(this.wrapper),setTimeout(function(){e.emitter.emit("ready",{})}),this.emitter.on("selection",function(){if(e.pickerVisible&&e.config.autoSave&&e.allowAutoSave){var t=e.getValue();t.hours&&t.minutes&&t.ampm&&e.onSave()}})}},{key:"buildButtons",value:function(){var e=this;this.buttons=new y(this.config,this.emitter),this.emitter.on("btn-save",function(){"text"==e.targetElement.type&&"INPUT"===e.targetElement.nodeName&&(e.targetElement.value=e.getValue().fullResult),e.onSave()}),this.emitter.on("btn-clear",function(){e.hours.resetValue(),e.minutes.resetValue(),"12"==e.config.format&&e.ampm.resetValue(),e.emitter.emit("clear")}),this.emitter.on("btn-close",function(){e.emitter.emit("close"),e.hide()}),this.container.append(this.buttons.build(this.config))}},{key:"buildItems",value:function(){this.hours=new m(this.config,this.emitter),this.container.append(this.hours.element),this.minutes=new d(this.config,this.emitter),this.container.append(this.minutes.element),"12"==this.config.format&&(this.ampm=new p(this.config,this.emitter),this.container.append(this.ampm.element))}},{key:"onSave",value:function(){this.emitter.emit("save",this.getValue()),this.hide()}},{key:"getValue",value:function(e){var t={hours:this.hours.getValue(),minutes:this.minutes.getValue(),fullResult:void 0};return"12"==this.config.format?(t.ampm=this.ampm.getValue(),t.hours&&t.minutes&&t.ampm&&(t.fullResult="".concat(("0"+t.hours).slice(-2),":").concat(("0"+t.minutes).slice(-2)," ").concat(t.ampm))):t.hours&&t.minutes&&(t.fullResult="".concat(("0"+t.hours).slice(-2),":").concat(("0"+t.minutes).slice(-2))),e?t[e]:t||{}}},{key:"setValue",value:function(t){if("string"==typeof t)try{var i=t.split(":");if(void 0!==i[0]&&""!=i[0]&&this.hours.setValue(i[0]),void 0!==i[1]&&""!=i[1]){var n=i[1].split(" ");this.minutes.setValue(n[0]),this.ampm.setValue(n[1])}}catch(e){}else if("object"==e(t))for(var s in t)t[s]&&this[s]&&this[s].setValue&&this[s].setValue(t[s].toString().toLowerCase())}},{key:"show",value:function(){var e=this.getValue();this.allowAutoSave=!(e.hours&&e.minutes&&e.ampm),this.pickerVisible=!0,this.wrapper.classList.add("nj-picker-show"),this.emitter.emit("show")}},{key:"hide",value:function(){this.pickerVisible=!1,this.wrapper.classList.remove("nj-picker-show"),this.emitter.emit("hide")}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"defaultConfig",get:function(){return{clickOutsideToClose:!0,autoSave:!1,disabledMinutes:[],disabledHours:[],format:"12",texts:{header:"",hours:"Hours",minutes:"Minutes",close:"Close",save:"Save",clear:"Clear",ampm:"AM/PM"},headerText:"",id:Math.random().toString(36).substring(7),minutes:[0,15,30,45],targetEl:null,targetID:null}}}]),i}()});